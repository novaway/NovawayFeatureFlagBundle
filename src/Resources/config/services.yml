services:
    Novaway\Bundle\FeatureFlagBundle\Command\ListFeatureCommand:
        arguments: ['@novaway_feature_flag.storage']
        tags: ['console.command']

    Novaway\Bundle\FeatureFlagBundle\Controller\FeatureApiController:
        arguments: [ '@novaway_feature_flag.storage' ]
        tags: ['controller.service_arguments']

    Novaway\Bundle\FeatureFlagBundle\Manager\DefaultFeatureManager:
        arguments: ['@Novaway\Bundle\FeatureFlagBundle\Storage\ArrayStorage']
    Novaway\Bundle\FeatureFlagBundle\Manager\LegacyFeatureManager:
        arguments: ['@Novaway\Bundle\FeatureFlagBundle\Storage\ArrayStorage']
    novaway_feature_flag.manager:
        alias: 'Novaway\Bundle\FeatureFlagBundle\Manager\LegacyFeatureManager'
    Novaway\Bundle\FeatureFlagBundle\Manager\FeatureManager:
        alias: novaway_feature_flag.manager

    Novaway\Bundle\FeatureFlagBundle\Storage\ArrayStorage:
        arguments:
            - "%novaway_feature_flag.features%"
    novaway_feature_flag.storage.default:
        alias: 'Novaway\Bundle\FeatureFlagBundle\Storage\ArrayStorage'

    novaway_feature_flag.listener.controller:
        class: Novaway\Bundle\FeatureFlagBundle\EventListener\ControllerListener
        arguments:
            - "@?annotation_reader"
        tags:
            - { name: kernel.event_subscriber }

    novaway_feature_flag.listener.feature:
        class: Novaway\Bundle\FeatureFlagBundle\EventListener\FeatureListener
        arguments:
            - "@novaway_feature_flag.manager"
        tags:
            - { name: kernel.event_subscriber }
